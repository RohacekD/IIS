/*! my-scss 2016-11-07 */
var datagridFitlerMultiSelect,datagridSortable,datagridSortableTree;$(document).on("click","[data-datagrid-confirm]",function(a){return confirm($(a.target).closest("a").attr("data-datagrid-confirm"))?void 0:(a.stopPropagation(),a.preventDefault())}),$.nette.ext("datagrid.confirm",{before:function(a,b){var c;return b.nette&&(c=b.nette.el.data("datagrid-confirm"))?confirm(c):void 0}}),$(document).on("change","select[data-autosubmit-per-page]",function(){return $(this).parent().find("input[type=submit]").click()}).on("change","select[data-autosubmit]",function(){return $(this).closest("form").submit()}).on("change","input[data-autosubmit][data-autosubmit-change]",function(a){var b,c;return c=a.which||a.keyCode||0,clearTimeout(window.datagrid_autosubmit_timer),b=$(this),window.datagrid_autosubmit_timer=setTimeout(function(a){return function(){return b.closest("form").submit()}}(this),200)}).on("keyup","input[data-autosubmit]",function(a){var b,c;return c=a.which||a.keyCode||0,13!==c&&(c>=9&&40>=c||c>=112&&123>=c)?void 0:(clearTimeout(window.datagrid_autosubmit_timer),b=$(this),window.datagrid_autosubmit_timer=setTimeout(function(a){return function(){return b.closest("form").submit()}}(this),200))}).on("keydown",".datagrid-inline-edit input",function(a){var b;return b=a.which||a.keyCode||0,13===b?(a.stopPropagation(),a.preventDefault(),$(this).closest("tr").find('.col-action-inline-edit [name="inline_edit[submit]"]').click()):void 0}),$(document).on("keydown","input[data-datagrid-manualsubmit]",function(a){var b;return b=a.which||a.keyCode||0,13===b?(a.stopPropagation(),a.preventDefault(),$(this).closest("form").submit()):void 0}),document.addEventListener("change",function(a){var b,c,d,e,f,g,h,i,j,k;if(d=a.target.getAttribute("data-check"),d&&(b=document.querySelector(".datagrid-"+d+" input[data-check]:checked"),k=document.querySelector(".datagrid-"+d+' select[name="group_action[group_action]"]'),k&&(b?k.disabled=!1:(k.disabled=!0,k.value="")),f=window.navigator.userAgent.indexOf("MSIE "),f?(c=document.createEvent("Event"),c.initEvent("change",!0,!0)):c=new Event("change",{bubbles:!0}),k&&k.dispatchEvent(c)),d=a.target.getAttribute("data-check-all")){for(h=document.querySelectorAll("input[type=checkbox][data-check-all-"+d+"]"),j=[],e=0,i=h.length;i>e;e++)g=h[e],g.checked=a.target.checked,f=window.navigator.userAgent.indexOf("MSIE "),f?(c=document.createEvent("Event"),c.initEvent("change",!0,!0)):c=new Event("change",{bubbles:!0}),j.push(g.dispatchEvent(c));return j}}),window.datagridSerializeUrl=function(a,b){var c=[];for(var d in a)if(a.hasOwnProperty(d)){var e=b?b+"["+d+"]":d,f=a[d];null!==f&&""!==f&&c.push("object"==typeof f?window.datagridSerializeUrl(f,e):encodeURIComponent(e)+"="+encodeURIComponent(f))}return c.join("&")},datagridSortable=function(){return"undefined"!=typeof $.fn.sortable?$(".datagrid [data-sortable]").sortable({handle:".handle-sort",items:"tr",axis:"y",update:function(a,b){var c,d,e,f,g,h,i;return h=b.item.closest("tr[data-id]"),e=h.data("id"),g=null,f=null,h.prev().length&&(g=h.prev().data("id")),h.next().length&&(f=h.next().data("id")),i=$(this).data("sortable-url"),d={},c=h.closest(".datagrid").find("tbody").attr("data-sortable-parent-path"),d[(c+"-item_id").replace(/^-/,"")]=e,d[(c+"-prev_id").replace(/^-/,"")]=g,d[(c+"-next_id").replace(/^-/,"")]=f,console.log(d),$.nette.ajax({type:"GET",url:i,data:d,error:function(a,b,c){return alert(a.statusText)}})},helper:function(a,b){return b.children().each(function(){return $(this).width($(this).width())}),b}}):void 0},$(function(){return datagridSortable()}),"undefined"==typeof datagridSortableTree&&(datagridSortableTree=function(){return"undefined"!=typeof $(".datagrid-tree-item-children").sortable?$(".datagrid-tree-item-children").sortable({handle:".handle-sort",items:".datagrid-tree-item:not(.datagrid-tree-item:first-child)",toleranceElement:"> .datagrid-tree-item-content",connectWith:".datagrid-tree-item-children",update:function(a,b){var c,d,e,f,g,h,i,j,k;return $(".toggle-tree-to-delete").remove(),j=b.item.closest(".datagrid-tree-item[data-id]"),e=j.data("id"),i=null,f=null,h=null,j.prev().length&&(i=j.prev().data("id")),j.next().length&&(f=j.next().data("id")),g=j.parent().closest(".datagrid-tree-item"),g.length&&(g.find(".datagrid-tree-item-children").first().css({display:"block"}),g.addClass("has-children"),h=g.data("id")),(k=$(this).data("sortable-url"))?(g.find("[data-toggle-tree]").first().removeClass("hidden"),c=j.closest(".datagrid-tree").attr("data-sortable-parent-path"),d={},d[(c+"-item_id").replace(/^-/,"")]=e,d[(c+"-prev_id").replace(/^-/,"")]=i,d[(c+"-next_id").replace(/^-/,"")]=f,d[(c+"-parent_id").replace(/^-/,"")]=h,$.nette.ajax({type:"GET",url:k,data:d,error:function(a,b,c){return"abort"!==c?alert(a.statusText):void 0}})):void 0},stop:function(a,b){return $(".toggle-tree-to-delete").removeClass("toggle-tree-to-delete")},start:function(a,b){var c;return c=b.item.parent().closest(".datagrid-tree-item"),c.length&&2===c.find(".datagrid-tree-item").length?c.find("[data-toggle-tree]").addClass("toggle-tree-to-delete"):void 0}}):void 0}),$(function(){return datagridSortableTree()}),$.nette.ext("datagrid.happy",{success:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;for(window.happy&&window.happy.reset(),g=$(".datagrid"),n=[],h=0,l=g.length;l>h;h++){for(f=g[h],d=f.classList,c="",k=0,m=d.length;m>k;k++)a=d[k],c=c+"."+a;b=document.querySelectorAll(c+" input[data-check]:checked"),1===b.length&&"toggle-all"===b[0].getAttribute("name")?(j=document.querySelector(c+" input[name=toggle-all]"),j?(j.checked=!1,i=window.navigator.userAgent.indexOf("MSIE "),i?(e=document.createEvent("Event"),e.initEvent("change",!0,!0)):e=new Event("change",{bubbles:!0}),n.push(j.dispatchEvent(e))):n.push(void 0)):n.push(void 0)}return n}}),$.nette.ext("datagrid.sortable",{success:function(){return datagridSortable()}}),$.nette.ext("datagrid.forms",{success:function(){return $(".datagrid").find("form").each(function(){return window.Nette.initForm(this)})}}),$.nette.ext("datagrid.url",{success:function(a){var b,c,d,e;return a._datagrid_url&&window.history.pushState&&(b=window.location.protocol+"//"+window.location.host,c=window.location.pathname,d=window.datagridSerializeUrl(a.state).replace(/&+$/gm,""),e=d?b+c+"?"+d.replace(/\&*$/,""):b+c,e+=window.location.hash,window.location.href!==e)?window.history.pushState({path:e},"",e):void 0}}),$.nette.ext("datagrid.sort",{success:function(a){var b,c,d,e;if(a._datagrid_sort){d=a._datagrid_sort,e=[];for(c in d)b=d[c],e.push($("#datagrid-sort-"+c).attr("href",b));return e}}}),$.nette.ext("datargid.item_detail",{before:function(a,b){var c,d;return b.nette&&b.nette.el.attr("data-toggle-detail")?(c=b.nette.el.attr("data-toggle-detail"),d=$(".item-detail-"+c),d.hasClass("loaded")?d.find(".item-detail-content").size()?(d.hasClass("toggled")?d.find(".item-detail-content").slideToggle("fast",function(a){return function(){return d.toggleClass("toggled")}}(this)):(d.toggleClass("toggled"),d.find(".item-detail-content").slideToggle("fast")),!1):(d.removeClass("toggled"),!0):d.addClass("loaded")):void 0},success:function(a){var b,c;return a._datagrid_toggle_detail?(b=a._datagrid_toggle_detail,c=$(".item-detail-"+b),c.toggleClass("toggled"),c.find(".item-detail-content").slideToggle("fast")):void 0}}),$.nette.ext("datagrid.tree",{before:function(a,b){var c;return!(b.nette&&b.nette.el.attr("data-toggle-tree")&&(b.nette.el.toggleClass("toggle-rotate"),c=b.nette.el.closest(".datagrid-tree-item").find(".datagrid-tree-item-children").first(),c.hasClass("loaded")))||(c.slideToggle("fast"),!1)},success:function(a){var b,c,d,e,f,g,h;if(a._datagrid_tree){d=a._datagrid_tree,b=$(".datagrid-tree-item[data-id="+d+"]").find(".datagrid-tree-item-children").first(),b.addClass("loaded"),f=a.snippets;for(e in f)g=f[e],c=$(g),h=$('<div class="datagrid-tree-item" id="'+e+'">'),h.attr("data-id",c.attr("data-id")),h.append(c),c.data("has-children")&&h.addClass("has-children"),b.append(h);b.addClass("loaded"),b.slideToggle("fast"),$.nette.load()}return datagridSortableTree()}}),$(document).on("click","[data-datagrid-editable-url]",function(a){var b,c,d,e,f,g,h,i,j,k,l;if(e=$(this),!e.hasClass("datagrid-inline-edit")&&!e.hasClass("editing")){e.addClass("editing"),l=e.html().trim().replace("<br>","\n"),e.data("value",l),"textarea"===e.data("datagrid-editable-type")?(i=$("<textarea>"+l+"</textarea>"),h=parseInt(e.css("padding").replace(/[^-\d\.]/g,""),10),f=e.outerHeight(),j=Math.round(parseFloat(e.css("line-height"))),g=(f-2*h)/j,i.attr("rows",Math.round(g))):"select"===e.data("datagrid-editable-type")?(i=$(e.data("datagrid-editable-element")),i.find("option").each(function(){return $(this).text()===l?i.find("option[value="+$(this).val()+"]").prop("selected",!0):void 0})):(i=$('<input type="'+e.data("datagrid-editable-type")+'">'),i.val(l)),d=e.data("datagrid-editable-attrs");for(b in d)c=d[b],i.attr(b,c);return e.removeClass("edited"),e.html(i),k=function(a,b){return l=b.val(),l!==a.data("value")&&$.nette.ajax({url:a.data("datagrid-editable-url"),data:{value:l},method:"POST"}).success(function(){return a.addClass("edited")}),a.removeClass("editing"),a.html(l)},e.find("input,textarea,select").focus().on("blur",function(){return k(e,$(this))}).on("keydown",function(a){return"textarea"!==e.data("datagrid-editable-type")&&13===a.which?(a.stopPropagation(),a.preventDefault(),k(e,$(this))):27===a.which?(a.stopPropagation(),a.preventDefault(),e.removeClass("editing"),e.html(e.data("value"))):void 0}),e.find("select").on("change",function(){return k(e,$(this))})}}),$.nette.ext("datagrid.after_inline_edit",{success:function(a){var b;return b=$(".datagrid-"+a._datagrid_name),a._datagrid_inline_edited?(b.find("tr[data-id="+a._datagrid_inline_edited+"] > td").addClass("edited"),b.find(".datagrid-inline-edit-trigger").removeClass("hidden")):a._datagrid_inline_edit_cancel?b.find(".datagrid-inline-edit-trigger").removeClass("hidden"):void 0}}),$(document).on("click","[data-datagrid-toggle-inline-add]",function(a){var b;return a.stopPropagation(),a.preventDefault(),b=$(this).closest(".datagrid").find(".datagrid-row-inline-add"),b.hasClass("datagrid-row-inline-add-hidden")&&b.removeClass("datagrid-row-inline-add-hidden"),b.find("input:not([readonly]),textarea:not([readonly])").first().focus()}),$(document).on("mousedown","[data-datagrid-cancel-inline-add]",function(a){return a.stopPropagation(),a.preventDefault(),$(".datagrid-row-inline-add").addClass("datagrid-row-inline-add-hidden")}),$.nette.ext("datagrid-toggle-inline-add",{success:function(a){return a._datagrid_inline_added?($(".datagrid-row-inline-add").find("textarea").html(""),$(".datagrid-row-inline-add").find("input[type!=submit]").val(""),$(".datagrid-row-inline-add").addClass("datagrid-row-inline-add-hidden")):void 0}}),datagridFitlerMultiSelect=function(){var a;return a=$(".selectpicker").first(),$.fn.selectpicker?$.fn.selectpicker.defaults={countSelectedText:a.data("i18n-selected"),iconBase:"",tickIcon:a.data("selected-icon-check")}:void 0},$(function(){return datagridFitlerMultiSelect()}),$.nette.ext("datagrid.fitlerMultiSelect",{success:function(){return datagridFitlerMultiSelect(),$.fn.selectpicker?$(".selectpicker").selectpicker():void 0}}),$.nette.ext("datagrid.inline-editing",{success:function(a){return a._datagrid_inline_editing?$(".datagrid-inline-edit-trigger").addClass("hidden"):void 0}}),$.nette.ext("datagrid.redraw-item",{success:function(a){var b;return a._datagrid_redraw_item_class?(b=$("tr[data-id="+a._datagrid_redraw_item_id+"]"),b.attr("class",a._datagrid_redraw_item_class)):void 0}});